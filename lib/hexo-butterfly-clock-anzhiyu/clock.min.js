function clockUpdateTime(e,c){let a="#000";const t=e.lives&&e.lives[0]?e.lives[0]:e.now;switch(t.weather||t.text){case"晴":a="#fdcc45";break;case"多云":a="#fe6976";break;case"阴":a="#fe7f5b";break;case"小雨":case"中雨":case"大雨":case"阵雨":case"雷阵雨":a="#49b1f5";break;case"暴雨":case"大暴雨":case"特大暴雨":a="#2152d1";break;case"雪":case"小雪":case"中雪":case"大雪":case"暴雪":a="#a3c2dc";break;default:a="#97acba"}var s=document.getElementById("hexo_electric_clock");clock_box_html=`
  <div class="clock-row">
    <span id="card-clock-clockdate" class="card-clock-clockdate"></span>
    <span class="card-clock-weather"><i class="qi-100-fill" style="color: ${a}"></i> ${t.weather||t.text} <span>${t.temperature||t.temp}</span> ℃</span>
    <span class="card-clock-humidity">💧 ${t.humidity||"0"}%</span>
  </div>
  <div class="clock-row">
    <span id="card-clock-time" class="card-clock-time"></span>
  </div>
  <div class="clock-row">
    <span class="card-clock-windDir"> <i class="qi-gale"></i> ${t.winddirection||t.windDir}</span>
    <span class="card-clock-location">${c}</span>
    <span id="card-clock-dackorlight" class="card-clock-dackorlight"></span>
  </div>
  `;var n=["SUN","MON","TUE","WED","THU","FRI","SAT"],r=document.getElementById("card-clock-loading");function o(){var e,c=new Date,a=l(c.getHours(),2)+":"+l(c.getMinutes(),2)+":"+l(c.getSeconds(),2),t=l(c.getFullYear(),4)+"-"+l(c.getMonth()+1,2)+"-"+l(c.getDate(),2)+" "+n[c.getDay()],s=c.getHours();if(s>12?(s-=12,e=" P M"):e=" A M",document.getElementById("card-clock-time")){var r=document.getElementById("card-clock-time"),o=document.getElementById("card-clock-clockdate"),i=document.getElementById("card-clock-dackorlight");r.innerHTML=a,o.innerHTML=t,i.innerHTML=e}}function l(e,c){for(var a="",t=0;t<c;t++)a+="0";return(a+e).slice(-c)}r&&(r.innerHTML=""),s.innerHTML=clock_box_html;setInterval(o,1e3);o()}function getIpInfo(){let e="上海市";function c(c,a){const[t,s]=c.split(",");fetch(`https://restapi.amap.com/v3/geocode/regeo?key=${gaud_map_key}&location=${t},${s}`).then(e=>e.json()).then(t=>{if("1"===t.status&&t.regeocode){const e=t.regeocode.addressComponent;return e.city||e.province||a}return a}).then(e=>fetch(`https://restapi.amap.com/v3/weather/weatherInfo?key=${qweather_key}&city=${encodeURIComponent(e)}&extensions=base`).then(e=>e.json()).then(t=>{"1"===t.status&&t.lives&&t.lives.length>0?clockUpdateTime(t,e):console.error("天气数据获取失败")})).catch(t=>{console.error("获取天气信息失败:",t),c(clock_rectangle,e)})}"true"===clock_default_rectangle_enable?c(clock_rectangle,e):fetch(`https://restapi.amap.com/v3/ip?key=${gaud_map_key}`).then(e=>e.json()).then(t=>{"1"===t.status&&t.rectangle?c(t.rectangle.split(";")[0],e):console.error("IP定位失败"),c(clock_rectangle,e)}).catch(t=>{console.error("IP定位失败:",t),c(clock_rectangle,e)})}getIpInfo();